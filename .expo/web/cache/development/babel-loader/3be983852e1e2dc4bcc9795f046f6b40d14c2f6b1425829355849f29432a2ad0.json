{"ast":null,"code":"import { Platform } from 'expo-modules-core';\nimport PushTokenManager from './PushTokenManager';\nimport { warnOfExpoGoPushUsage } from './warnOfExpoGoPushUsage';\nconst newTokenEventName = 'onDevicePushToken';\nexport function addPushTokenListener(listener) {\n  warnOfExpoGoPushUsage();\n  return PushTokenManager.addListener(newTokenEventName, ({\n    devicePushToken\n  }) => listener({\n    data: devicePushToken,\n    type: Platform.OS\n  }));\n}","map":{"version":3,"names":["Platform","PushTokenManager","warnOfExpoGoPushUsage","newTokenEventName","addPushTokenListener","listener","addListener","devicePushToken","data","type","OS"],"sources":["/project/workspace/node_modules/expo-notifications/src/TokenEmitter.ts"],"sourcesContent":["import { type EventSubscription, Platform } from 'expo-modules-core';\n\nimport PushTokenManager from './PushTokenManager';\nimport { DevicePushToken } from './Tokens.types';\nimport { warnOfExpoGoPushUsage } from './warnOfExpoGoPushUsage';\n\n/**\n * A function accepting a device push token ([`DevicePushToken`](#devicepushtoken)) as an argument.\n * > **Note:** You should not call `getDevicePushTokenAsync` inside this function, as it triggers the listener and may lead to an infinite loop.\n * @header fetch\n */\nexport type PushTokenListener = (token: DevicePushToken) => void;\n\n// Web uses SyntheticEventEmitter\nconst newTokenEventName = 'onDevicePushToken';\n\n/**\n * In rare situations, a push token may be changed by the push notification service while the app is running.\n * When a token is rolled, the old one becomes invalid and sending notifications to it will fail.\n * A push token listener will let you handle this situation gracefully by registering the new token with your backend right away.\n * @param listener A function accepting a push token as an argument, it will be called whenever the push token changes.\n * @return An [`EventSubscription`](#eventsubscription) object represents the subscription of the provided listener.\n * @header fetch\n * @example Registering a push token listener using a React hook.\n * ```jsx\n * import React from 'react';\n * import * as Notifications from 'expo-notifications';\n *\n * import { registerDevicePushTokenAsync } from '../api';\n *\n * export default function App() {\n *   React.useEffect(() => {\n *     const subscription = Notifications.addPushTokenListener(registerDevicePushTokenAsync);\n *     return () => subscription.remove();\n *   }, []);\n *\n *   return (\n *     // Your app content\n *   );\n * }\n * ```\n */\nexport function addPushTokenListener(listener: PushTokenListener): EventSubscription {\n  warnOfExpoGoPushUsage();\n  return PushTokenManager.addListener(newTokenEventName, ({ devicePushToken }) =>\n    listener({ data: devicePushToken, type: Platform.OS })\n  );\n}\n"],"mappings":"AAAA,SAAiCA,QAAQ,QAAQ,mBAAmB;AAEpE,OAAOC,gBAAgB,MAAM,oBAAoB;AAEjD,SAASC,qBAAqB,QAAQ,yBAAyB;AAU/D,MAAMC,iBAAiB,GAAG,mBAAmB;AA4B7C,OAAM,SAAUC,oBAAoBA,CAACC,QAA2B;EAC9DH,qBAAqB,EAAE;EACvB,OAAOD,gBAAgB,CAACK,WAAW,CAACH,iBAAiB,EAAE,CAAC;IAAEI;EAAe,CAAE,KACzEF,QAAQ,CAAC;IAAEG,IAAI,EAAED,eAAe;IAAEE,IAAI,EAAET,QAAQ,CAACU;EAAE,CAAE,CAAC,CACvD;AACH","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}